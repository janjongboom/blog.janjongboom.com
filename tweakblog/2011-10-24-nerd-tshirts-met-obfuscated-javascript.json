{
    "title": "Nerd tshirts met obfuscated javascript",
    "language": "nl",
    "link": "http://glamour.tweakblogs.net/blog/7223/nerd-tshirts-met-obfuscated-javascript.html",
    "date": "2011-10-24T09:08:00.000Z",
    "category": "Frontend",
    "views": 4331,
    "articleHtml": "Het begin:<br>\r\n<hr><br>\r\n<img src=\"http://www.100procentjan.nl/tweakers/c9_tshirt.png\" title=\"http://www.100procentjan.nl/tweakers/c9_tshirt.png\" alt=\"http://www.100procentjan.nl/tweakers/c9_tshirt.png\"><br>\r\n<hr><br>\r\nHet resultaat (uitvoeren in Chrome of Firefox console):<br>\r\n<br>JavaScript:<br><table class=\"phphighlight\"><tr><td class=\"phphighlightline\"><code>1<br></code></td><td class=\"phphighlightcode\"><div><code><span class=\"code_ident\">__</span>=!(<span class=\"code_ident\">$</span>=[<span class=\"code_ident\">$</span>=[]])+<span class=\"code_ident\">$</span>;<span class=\"code_ident\">_</span>=<span class=\"code_ident\">$</span>[<span class=\"code_ident\">$</span>]+<span class=\"code_string\">&apos;&apos;</span>;<span class=\"code_ident\">$_</span>=({}+<span class=\"code_ident\">$</span>);<span class=\"code_ident\">$_</span>[-~((<span class=\"code_ident\">$</span>=-~<span class=\"code_ident\">$</span>)&lt;&lt;-~<span class=\"code_ident\">$</span>)]+<span class=\"code_ident\">__</span>[-~<span class=\"code_ident\">$</span>]+<span class=\"code_ident\">$_</span>[<span class=\"code_ident\">$</span>]+<span class=\"code_ident\">_</span>[~-<span class=\"code_ident\">$</span>]+<span class=\"code_ident\">_</span>[<span class=\"code_ident\">$</span>=-~<span class=\"code_ident\">$</span>]+((<span class=\"code_ident\">$</span>&lt;&lt;<span class=\"code_ident\">$</span>)+~-<span class=\"code_ident\">$</span>)</code></div></td></tr></table><br>\r\nGeinspireerd door <a href=\"http://adamcecc.blogspot.com/2011/01/javascript.html\" rel=\"external\">deze blogpost</a> nu zelf maar eens bezig geweest met het (expres) obfuscaten van javascript.<br><a name=\"more\"></a><br>\r\n<b>Wat willen we tonen</b><br>\r\nIn dit geval moet &apos;cloud9&apos; op het scherm komen, dat betekent dat we 5 chars nodig hebben: &apos;c&apos;, &apos;l&apos;, &apos;o&apos;, &apos;u&apos;, &apos;d&apos;, plus het getal 9. Omdat in javascript elke string een char array is kunnen met &apos;[n]&apos; elk karakter uit een string halen. We hebben dus strings nodig waar deze letters in voor komen. Gelukkig zijn hier een paar trucjes voor:<br>\r\n<br>code:<br><table class=\"phphighlight\"><tr><td class=\"phphighlightline\"><pre>1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n</pre></td><td class=\"phphighlightcode\"><div><pre>// $ is onze magic var, \r\n// als je hem als getal gebruikt is hij 0, \r\n// maar kan ook voor meer gebruikt worden...\r\n$=[$=[]]; \r\n\r\n// dit geeft nu &quot;false&quot;\r\n!($)+$;\r\n// en dit geeft &quot;true&quot;\r\n!!($)+$;\r\n// voor &quot;undefined&quot;\r\n$[$]+&apos;&apos;;\r\n// en &quot;[object Object]&quot;\r\n({}+$);</pre></div></td></tr></table><br>\r\n<br>\r\n<b>Set up</b><br>\r\nIn deze strings zitten alle chars die we nodig hebben, dus tijd om ze toe te wijzen:<br>\r\n<br>JavaScript:<br><table class=\"phphighlight\"><tr><td class=\"phphighlightline\"><code>1<br>2<br>3<br>4<br>5<br></code></td><td class=\"phphighlightcode\"><div><code><span class=\"code_ident\">__</span>=!(<span class=\"code_ident\">$</span>=[<span class=\"code_ident\">$</span>=[]])+<span class=\"code_ident\">$</span>;<span class=\"code_ident\">_</span>=<span class=\"code_ident\">$</span>[<span class=\"code_ident\">$</span>]+<span class=\"code_string\">&apos;&apos;</span>;<span class=\"code_ident\">$_</span>=({}+<span class=\"code_ident\">$</span>);\n<br>\n<br><span class=\"code_ident\">__</span>&#xA0;=&#xA0;<span class=\"code_string\">&quot;false&quot;</span>\n<br><span class=\"code_ident\">_</span>&#xA0;=&#xA0;<span class=\"code_string\">&quot;undefined&quot;</span>\n<br><span class=\"code_ident\">$_</span>&#xA0;=&#xA0;<span class=\"code_string\">&quot;[object&#xA0;Object]&quot;</span></code></div></td></tr></table><br>\r\nOm hier &apos;cloud9&apos; van te maken doen we dit:<br>\r\n<br>JavaScript:<br><table class=\"phphighlight\"><tr><td class=\"phphighlightline\"><code>1<br></code></td><td class=\"phphighlightcode\"><div><code><span class=\"code_ident\">$_</span>[<span class=\"code_number\">5</span>]&#xA0;+&#xA0;<span class=\"code_ident\">__</span>[<span class=\"code_number\">2</span>]&#xA0;+&#xA0;<span class=\"code_ident\">$_</span>[<span class=\"code_number\">1</span>]&#xA0;+&#xA0;<span class=\"code_ident\">_</span>[<span class=\"code_number\">0</span>]&#xA0;+&#xA0;<span class=\"code_ident\">_</span>[<span class=\"code_number\">2</span>]&#xA0;+&#xA0;<span class=\"code_number\">9</span></code></div></td></tr></table><br>\r\n<br>\r\n<b>Pielen met getallen</b><br>\r\nDat kan onduidelijker! Gelukkig hebben we met &apos;$&apos; een var die we als 0 kunnen misbruiken. Eerste job: van 0 -&gt; 5 komen.<br>\r\n<br>JavaScript:<br><table class=\"phphighlight\"><tr><td class=\"phphighlightline\"><code>1<br>2<br>3<br>4<br></code></td><td class=\"phphighlightcode\"><div><code><span class=\"code_ident\">$</span>&#xA0;=&#xA0;<span class=\"code_number\">0</span>;\n<br><span class=\"code_number\">1</span>&#xA0;+&#xA0;((<span class=\"code_ident\">$</span>&#xA0;+&#xA0;<span class=\"code_number\">1</span>)&#xA0;&lt;&lt;&#xA0;(<span class=\"code_ident\">$</span>&#xA0;+&#xA0;<span class=\"code_number\">2</span>))\n<br><span class=\"code_comment\">//&#xA0;kan&#xA0;ook:</span>\n<br><span class=\"code_number\">1</span>&#xA0;+&#xA0;((<span class=\"code_ident\">$</span>&#xA0;=&#xA0;<span class=\"code_ident\">$</span>&#xA0;+&#xA0;<span class=\"code_number\">1</span>)&#xA0;&lt;&lt;&#xA0;(<span class=\"code_ident\">$</span>&#xA0;+&#xA0;<span class=\"code_number\">1</span>))</code></div></td></tr></table><br>\r\nIn javascript bestaat er de tilde (~) operator (ook bij mij onbekend tot vorige week <img src=\"http://tweakimg.net/g/s/smile.gif\" width=\"15\" height=\"15\" alt=\":)\">), die &apos;-(n+1)&apos; evalueert. ~5 wordt dan -6. Vooral praktisch bij werken met &apos;indexOf&apos; die -1 teruggeeft wanneer er niets gevonden is, want ~-1 geeft 0. De reden hiervoor gaf ACM:<blockquote><div class=\"quote\"><a href=\"http://glamour.tweakblogs.net/blog/7223/nerd-tshirts-met-obfuscated-javascript.html#r_97880\">ACM schreef op maandag 24 oktober 2011 @ 15:30:</a><br>\r\nDe tilde is ook wel bekend als de &quot;binary not&quot;, oftewel geef de inverse van de bits in de variabele waar je het op uitvoert... En toevallig is idd de bitrepresentatie van integers zodanig dat ~n = -(n+1), maar dat is dus eerder bijzaak dan het doel van de operator <img src=\"http://tweakimg.net/g/s/wink.gif\" width=\"15\" height=\"15\" alt=\";)\"></div></blockquote><br>JavaScript:<br><table class=\"phphighlight\"><tr><td class=\"phphighlightline\"><code>1<br>2<br>3<br></code></td><td class=\"phphighlightcode\"><div><code><span class=\"code_keyword\">if</span>&#xA0;(~<span class=\"code_ident\">someString</span>.<span class=\"code_method\">indexOf</span>(<span class=\"code_string\">&quot;jan&quot;</span>))&#xA0;{\n<br>&#xA0;&#xA0;&#xA0;&#xA0;<span class=\"code_comment\">//&#xA0;niets&#xA0;gevonden</span>\n<br>}</code></div></td></tr></table><br>\r\nLeuk is dat je &apos;-~&apos; dus (n+1) wordt. Praktisch, want we hebben alleen nog +1 over in ons &apos;van 0 naar 5&apos; stukje.<br>\r\n<br>JavaScript:<br><table class=\"phphighlight\"><tr><td class=\"phphighlightline\"><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br></code></td><td class=\"phphighlightcode\"><div><code><span class=\"code_number\">1</span>&#xA0;+&#xA0;((<span class=\"code_ident\">$</span>&#xA0;=&#xA0;<span class=\"code_ident\">$</span>&#xA0;+&#xA0;<span class=\"code_number\">1</span>)&#xA0;&lt;&lt;&#xA0;(<span class=\"code_ident\">$</span>&#xA0;+&#xA0;<span class=\"code_number\">1</span>))\n<br><span class=\"code_comment\">//&#xA0;wordt:</span>\n<br>-~((<span class=\"code_ident\">$</span>=<span class=\"code_ident\">$</span><span class=\"code_number\">+1</span>)&#xA0;&lt;&lt;&#xA0;(<span class=\"code_ident\">$</span><span class=\"code_number\">+1</span>))\n<br><span class=\"code_comment\">//&#xA0;wordt:</span>\n<br>-~((<span class=\"code_ident\">$</span>=-~<span class=\"code_ident\">$</span>)&#xA0;&lt;&lt;&#xA0;-~<span class=\"code_ident\">$</span>)\n<br><span class=\"code_comment\">//&#xA0;wordt:</span>\n<br><span class=\"code_ident\">$_</span>[-~((<span class=\"code_ident\">$</span>=-~<span class=\"code_ident\">$</span>)&lt;&lt;-~<span class=\"code_ident\">$</span>)]\n<br><span class=\"code_comment\">//&#xA0;is:&#xA0;&apos;c&apos;</span></code></div></td></tr></table><br>\r\n<br>\r\n<b>De rest</b><br>\r\n$ heeft op dit moment de waarde &apos;1&apos;, en we moeten naar __[2]:<br>\r\n<br>JavaScript:<br><table class=\"phphighlight\"><tr><td class=\"phphighlightline\"><code>1<br>2<br></code></td><td class=\"phphighlightcode\"><div><code><span class=\"code_ident\">__</span>[-~<span class=\"code_ident\">$</span>]\n<br><span class=\"code_comment\">//&#xA0;is:&#xA0;&apos;l&apos;</span></code></div></td></tr></table><br>\r\nDaarna &apos;$_[1]&apos;, en die is dan heel simpel:<br>\r\n<br>JavaScript:<br><table class=\"phphighlight\"><tr><td class=\"phphighlightline\"><code>1<br>2<br></code></td><td class=\"phphighlightcode\"><div><code><span class=\"code_ident\">$_</span>[<span class=\"code_ident\">$</span>]\n<br><span class=\"code_comment\">//&#xA0;is:&#xA0;&apos;o&apos;</span></code></div></td></tr></table><br>\r\nNu van 1 naar 0, en ook hier komt de tilde operator van pas:<br>\r\n<br>JavaScript:<br><table class=\"phphighlight\"><tr><td class=\"phphighlightline\"><code>1<br>2<br>3<br></code></td><td class=\"phphighlightcode\"><div><code>~<span class=\"code_number\">-1</span>&#xA0;<span class=\"code_comment\">//&#xA0;geeft&#xA0;0!</span>\n<br><span class=\"code_ident\">_</span>[~-<span class=\"code_ident\">$</span>]\n<br><span class=\"code_comment\">//&#xA0;is:&#xA0;&apos;u&apos;</span></code></div></td></tr></table><br>\r\nVoor de &apos;d&apos; van 1 naar 2:<br>\r\n<br>JavaScript:<br><table class=\"phphighlight\"><tr><td class=\"phphighlightline\"><code>1<br>2<br>3<br>4<br>5<br></code></td><td class=\"phphighlightcode\"><div><code><span class=\"code_ident\">_</span>[~-<span class=\"code_ident\">$</span>]\n<br><span class=\"code_comment\">//&#xA0;is:&#xA0;&apos;d&apos;</span>\n<br><span class=\"code_comment\">//&#xA0;omdat&#xA0;we&#xA0;straks&#xA0;naar&#xA0;9&#xA0;moeten&#xA0;willen&#xA0;we&#xA0;2&#xA0;meteen&#xA0;toewijzen:</span>\n<br><span class=\"code_ident\">_</span>[<span class=\"code_ident\">$</span>=~-<span class=\"code_ident\">$</span>]\n<br><span class=\"code_comment\">//&#xA0;is:&#xA0;&apos;d&apos;&#xA0;en&#xA0;$&#xA0;=&#xA0;2</span></code></div></td></tr></table><br>\r\n<br>\r\n<b>En nu naar 9</b><br>\r\nWat we nu hebben is &quot;cloud&quot;:<br>\r\n<br>JavaScript:<br><table class=\"phphighlight\"><tr><td class=\"phphighlightline\"><code>1<br></code></td><td class=\"phphighlightcode\"><div><code><span class=\"code_ident\">$_</span>[-~((<span class=\"code_ident\">$</span>=-~<span class=\"code_ident\">$</span>)&lt;&lt;-~<span class=\"code_ident\">$</span>)]+<span class=\"code_ident\">__</span>[-~<span class=\"code_ident\">$</span>]+<span class=\"code_ident\">$_</span>[<span class=\"code_ident\">$</span>]+<span class=\"code_ident\">_</span>[~-<span class=\"code_ident\">$</span>]+<span class=\"code_ident\">_</span>[<span class=\"code_ident\">$</span>=-~<span class=\"code_ident\">$</span>]</code></div></td></tr></table><br>\r\n$ heeft de waarde &apos;2&apos; en we moeten naar 9. Dit kan via:<br>\r\n<br>JavaScript:<br><table class=\"phphighlight\"><tr><td class=\"phphighlightline\"><code>1<br>2<br>3<br>4<br>5<br></code></td><td class=\"phphighlightcode\"><div><code><span class=\"code_number\">2</span>&#xA0;&lt;&lt;&#xA0;<span class=\"code_number\">2</span>&#xA0;<span class=\"code_comment\">//&#xA0;geeft&#xA0;8</span>\n<br>(<span class=\"code_number\">2</span>&#xA0;&lt;&lt;&#xA0;<span class=\"code_number\">2</span>)&#xA0;+&#xA0;(<span class=\"code_number\">2</span>&#xA0;-&#xA0;<span class=\"code_number\">1</span>)&#xA0;<span class=\"code_comment\">//&#xA0;geeft&#xA0;9!</span>\n<br>\n<br>(<span class=\"code_ident\">$</span>&#xA0;&lt;&lt;&#xA0;<span class=\"code_ident\">$</span>)&#xA0;+&#xA0;~-<span class=\"code_ident\">$</span>&#xA0;<span class=\"code_comment\">//&#xA0;tah&#xA0;dah</span>\n<br>((<span class=\"code_ident\">$</span>&lt;&lt;<span class=\"code_ident\">$</span>)+~-<span class=\"code_ident\">$</span>)&#xA0;<span class=\"code_comment\">//&#xA0;wrap&#xA0;up</span></code></div></td></tr></table><br>\r\n<br>\r\n<b>En klaar!</b><br>\r\n<img src=\"http://www.100procentjan.nl/tweakers/c9_tshirt2.png\" title=\"http://www.100procentjan.nl/tweakers/c9_tshirt2.png\" alt=\"http://www.100procentjan.nl/tweakers/c9_tshirt2.png\"><br>\r\nBinnenkort in de betere modezaak  <img src=\"http://tweakimg.net/g/s/wink.gif\" width=\"15\" height=\"15\" alt=\";)\">",
    "nextLink": "http://glamour.tweakblogs.net/blog/7211/schizofrene-code-met-node-punt-js.html",
    "comments": [
        {
            "author": "phex",
            "date": "maandag 24 oktober 2011 12:03",
            "contentHtml": "Nu nog een tshirt met ingebouwde camera / OCR software / java interpreter.<br>\r\n<br>\r\nZelfs met uitleg duurt het nog wel even voordat je doorhebt wat er staat...",
            "ownReply": false
        },
        {
            "author": "onok",
            "date": "maandag 24 oktober 2011 12:22",
            "contentHtml": "Het idee van een Nershirt is wel een beetje dat Nerds begrijpen wat er staat. Ik denk dat er maar heel weinig mensen zijn die dit kunnen volgen. Ik iig niet, en ik ben toch redelijk thuis in javascript <img src=\"http://tweakimg.net/g/s/puh2.gif\" width=\"15\" height=\"15\" alt=\":P\">",
            "ownReply": false
        },
        {
            "author": "Sgreehder",
            "date": "maandag 24 oktober 2011 14:14",
            "contentHtml": "Hehe, met onok eens, het slaat een beetje de plank mis. Wel aardig gevonden.",
            "ownReply": false
        },
        {
            "author": "creator1988",
            "date": "maandag 24 oktober 2011 14:24",
            "contentHtml": "<blockquote><div class=\"quote\"><a href=\"http://glamour.tweakblogs.net/blog/7223/nerd-tshirts-met-obfuscated-javascript.html#r_97852\">onok schreef op maandag 24 oktober 2011 @ 12:22:</a><br>\r\nHet idee van een Nershirt is wel een beetje dat Nerds begrijpen wat er staat. Ik denk dat er maar heel weinig mensen zijn die dit kunnen volgen. Ik iig niet, en ik ben toch redelijk thuis in javascript <img src=\"http://tweakimg.net/g/s/puh2.gif\" width=\"15\" height=\"15\" alt=\":P\"></div></blockquote>Ja, deze zal er waarschijnlijk eerder komen <img src=\"http://tweakimg.net/g/s/wink.gif\" width=\"15\" height=\"15\" alt=\";)\"> <br>\r\n<br>JavaScript:<br><table class=\"phphighlight\"><tr><td class=\"phphighlightline\"><code>1<br></code></td><td class=\"phphighlightcode\"><div><code><span class=\"code_keyword\">var</span>&#xA0;<span class=\"code_ident\">self</span>&#xA0;=&#xA0;<span class=\"code_keyword\">this</span>;</code></div></td></tr></table><blockquote><div class=\"quote\"><a href=\"http://glamour.tweakblogs.net/blog/7223/nerd-tshirts-met-obfuscated-javascript.html#r_97870\">Sgreehder schreef op maandag 24 oktober 2011 @ 14:14:</a><br>\r\nHehe, met onok eens, het slaat een beetje de plank mis. Wel aardig gevonden.</div></blockquote>Programmeren moet af en toe ook gewoon downright leuk zijn  <img src=\"http://tweakimg.net/g/s/clown.gif\" width=\"15\" height=\"15\" alt=\":+\">",
            "ownReply": true
        },
        {
            "author": "sfranken",
            "date": "maandag 24 oktober 2011 14:48",
            "contentHtml": "<blockquote><div class=\"quote\"><a href=\"http://glamour.tweakblogs.net/blog/7223/nerd-tshirts-met-obfuscated-javascript.html#r_97872\">creator1988 schreef op maandag 24 oktober 2011 @ 14:24:</a><br>\r\n[...]<br>\r\n<br>\r\nJa, deze zal er waarschijnlijk eerder komen <img src=\"http://tweakimg.net/g/s/wink.gif\" width=\"15\" height=\"15\" alt=\";)\"> <br>\r\n<br>JavaScript:<br><table class=\"phphighlight\"><tr><td class=\"phphighlightline\"><code>1<br></code></td><td class=\"phphighlightcode\"><div><code><span class=\"code_keyword\">var</span>&#xA0;<span class=\"code_ident\">self</span>&#xA0;=&#xA0;<span class=\"code_keyword\">this</span>;</code></div></td></tr></table><br>\r\n<br>\r\n[...]<br>\r\n<br>\r\nProgrammeren moet af en toe ook gewoon downright leuk zijn  <img src=\"http://tweakimg.net/g/s/clown.gif\" width=\"15\" height=\"15\" alt=\":+\"></div></blockquote>i lol&apos;d",
            "ownReply": false
        },
        {
            "author": "ACM",
            "date": "maandag 24 oktober 2011 15:30",
            "contentHtml": "De tilde is ook wel bekend als de &quot;binary not&quot;, oftewel geef de inverse van de bits in de variabele waar je het op uitvoert... En toevallig is idd de bitrepresentatie van integers zodanig dat ~n = -(n+1), maar dat is dus eerder bijzaak dan het doel van de operator <img src=\"http://tweakimg.net/g/s/wink.gif\" width=\"15\" height=\"15\" alt=\";)\"><p class=\"edit\">[Reactie gewijzigd op maandag 24 oktober 2011 15:31]</p>",
            "ownReply": false
        },
        {
            "author": "SKiLLa",
            "date": "maandag 24 oktober 2011 16:31",
            "contentHtml": "@ACM: Juist, de uitleg van de tilde stoorde me ookal <img src=\"http://tweakimg.net/g/s/smile.gif\" width=\"15\" height=\"15\" alt=\":)\">",
            "ownReply": false
        },
        {
            "author": "creator1988",
            "date": "maandag 24 oktober 2011 16:55",
            "contentHtml": "<blockquote><div class=\"quote\"><a href=\"http://glamour.tweakblogs.net/blog/7223/nerd-tshirts-met-obfuscated-javascript.html#r_97880\">ACM schreef op maandag 24 oktober 2011 @ 15:30:</a><br>\r\nDe tilde is ook wel bekend als de &quot;binary not&quot;, oftewel geef de inverse van de bits in de variabele waar je het op uitvoert... En toevallig is idd de bitrepresentatie van integers zodanig dat ~n = -(n+1), maar dat is dus eerder bijzaak dan het doel van de operator <img src=\"http://tweakimg.net/g/s/wink.gif\" width=\"15\" height=\"15\" alt=\";)\"></div></blockquote>Ik heb je commentaar toegevoegd aan mijn post.",
            "ownReply": true
        }
    ]
}