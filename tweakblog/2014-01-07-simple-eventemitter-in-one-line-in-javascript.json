{
    "title": "Simple EventEmitter in one line in javascript",
    "language": "nl",
    "link": "http://glamour.tweakblogs.net/blog/9765/simple-eventemitter-in-one-line-in-javascript.html",
    "date": "2014-01-07T14:12:00.000Z",
    "category": "Frontend",
    "views": 4450,
    "articleHtml": "Chances are that if you have a large javascript application that you&apos;ll need an EventEmitter at one moment or another because events are great to wire separate modules together without them having to expose implementation details. Too bad that you&apos;ll need to pull in dependencies, another library, extra risk, etc. Especially if you&apos;re testing some simple scenario or small app that&apos;s a lot of boilerplate. Behold: a dependency-less event emitter (1 line of javascript!):<br>\r\n<br>JavaScript:<br><table class=\"phphighlight\"><tr><td class=\"phphighlightline\"><code>1<br>2<br>3<br></code></td><td class=\"phphighlightcode\"><div><code><span class=\"code_keyword\">function</span>&#xA0;<span class=\"code_method\">createEventEmitter</span>()&#xA0;{\n<br>&#xA0;&#xA0;<span class=\"code_keyword\">return</span>&#xA0;<span class=\"code_special\">document</span>.<span class=\"code_method\">createElement</span>(<span class=\"code_string\">&apos;div&apos;</span>);\n<br>}</code></div></td></tr></table><br>\r\nAll DOM elements implement <a href=\"http://www.w3.org/TR/DOM-Level-3-Events/\" rel=\"external nofollow\">DOM Level 3 events</a>, which you can abuse as a nice event emitter. Great thing is that you get cancelation and bubbling as well. Bad things:<ul><li>It&apos;s about 5x times as slow as EventEmitter.js (<a href=\"https://groups.google.com/d/msg/mozilla.dev.gaia/D4kRaSDspQI/OINSjliIu5oJ\" rel=\"external nofollow\">source</a>), but you can very easily swap out this by EE if required in a later stage.</li><li>Dispatching events is a bit cumbersome because you need to use this syntax: `new CustomEvent(&quot;eventname&quot;, { detail: &quot;eventdetail&quot; })`</li></ul>Usage:<br>\r\n<br>JavaScript:<br><table class=\"phphighlight\"><tr><td class=\"phphighlightline\"><code>1<br>2<br>3<br>4<br>5<br></code></td><td class=\"phphighlightcode\"><div><code><span class=\"code_keyword\">var</span>&#xA0;<span class=\"code_ident\">ee</span>&#xA0;=&#xA0;<span class=\"code_special\">document</span>.<span class=\"code_method\">createElement</span>(<span class=\"code_string\">&apos;div&apos;</span>)\n<br><span class=\"code_ident\">ee</span>.<span class=\"code_method\">addEventListener</span>(<span class=\"code_string\">&apos;awesome&apos;</span>,&#xA0;<span class=\"code_keyword\">function</span>()&#xA0;{&#xA0;<span class=\"code_ident\">console</span>.<span class=\"code_method\">log</span>(<span class=\"code_string\">&apos;omg&#xA0;omg&#xA0;omg&apos;</span>,&#xA0;<span class=\"code_ident\">e</span>.<span class=\"code_ident\">detail</span>)&#xA0;})\n<br><span class=\"code_ident\">ee</span>.<span class=\"code_method\">dispatchEvent</span>(<span class=\"code_keyword\">new</span>&#xA0;<span class=\"code_method\">CustomEvent</span>(<span class=\"code_string\">&apos;awesome&apos;</span>,&#xA0;{&#xA0;<span class=\"code_ident\">detail</span>:&#xA0;<span class=\"code_number\">1337</span>&#xA0;}))\n<br><span class=\"code_comment\">//&#xA0;omg&#xA0;omg&#xA0;omg,&#xA0;1337&#xA0;/*&#xA0;output&#xA0;from&#xA0;the&#xA0;console.log&#xA0;*/</span>\n<br><span class=\"code_comment\">//&#xA0;true&#xA0;/*&#xA0;event&#xA0;did&#xA0;not&#xA0;get&#xA0;canceled&#xA0;*/</span></code></div></td></tr></table>",
    "nextLink": "http://glamour.tweakblogs.net/blog/9761/simple-function-logger-in-js.html",
    "comments": [
        {
            "author": "Gamebuster",
            "date": "dinsdag 18 maart 2014 14:14",
            "contentHtml": "dependency-less*<br>\r\n*depends on a browser<br>\r\n<br>\r\nI like the creativity involved, but I&apos;ll stick with NodeJS&apos; event emitter: <a href=\"http://nodejs.org/api/events.html\" rel=\"external nofollow\" title=\"http://nodejs.org/api/events.html\">http://nodejs.org/api/events.html</a><br>\r\nIts source is plain JS and capable of running in the browser.<br>\r\n<br>\r\nAlso, I love JS blogs. Keep them coming!<p class=\"edit\">[Reactie gewijzigd op dinsdag 18 maart 2014 14:16]</p>",
            "ownReply": false
        }
    ]
}